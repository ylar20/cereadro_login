<md-dialog aria-label="List dialog">
    <md-tabs md-dynamic-height md-border-bottom md-selected="selected">
        <md-tab label="Log in">
            <md-content class="md-padding">
                <h2>Log in </h2>
                <md-progress-linear ng-show="logging_in" md-mode="indeterminate"></md-progress-linear>
                <p class="text-danger" ng-show="loginError">Failed to log in, invalid credentials</p>
                <hr>
                <form ng-submit="login()" name="loginForm">
                    <md-input-container class="md-block">
                        <ng-include src="'field_username'"></ng-include>
                    </md-input-container>
                    <md-input-container class="md-block">
                        <ng-include src="'field_password'"></ng-include>
                    </md-input-container>

                    <md-button ng-disabled="loginForm.$invalid" type="submit" class="md-raised md-primary">Log in</md-button>
                </form>
            </md-content>
        </md-tab>

        <md-tab label="Register">
            <md-content class="md-padding">
                <h2>Register</h2>
                <md-progress-linear ng-show="registering" md-mode="indeterminate"></md-progress-linear>
                <p class="text-danger" ng-show="registerError">Registration failed, {{registerError}}</p>
                <hr>
                <form ng-submit="register()" name="registerForm">
                    <md-input-container class="md-block">
                        <ng-include src="'field_username'"></ng-include>
                    </md-input-container>
                    <md-input-container class="md-block">
                        <ng-include src="'field_password'"></ng-include>
                    </md-input-container>
                    <md-input-container class="md-block">
                        <ng-include src="'field_password_repeat'"></ng-include>
                    </md-input-container>
                    <md-button ng-disabled="registerForm.$invalid" type=submit class="md-raised md-primary">Register</md-button>
                </form>
            </md-content>
        </md-tab>

    </md-tabs>
</md-dialog>



<script type='text/ng-template' id="field_username">
    <label>Username:</label>
    <input aria-label="username"
           name="username"
           type="text"
           ng-model="user.username"
           ng-pattern="/^[a-z1-9]{4,12}$/"
           ng-model-options="{ allowInvalid: true }"
           required>
    <div ng-messages="loginForm.username.$error">
        <div ng-message="required">
            Please enter a username
        </div>
        <div ng-message="pattern">
            Alphanumeric only and 4-12 chars please
        </div>
    </div>
</script>

<script type='text/ng-template' id="field_password">
    <label>Password:</label>
    <input aria-label="password"
           name="password"
           type="password"
           ng-model="user.password"
           ng-pattern="/^.{4,}$/"
           ng-model-options="{ allowInvalid: true }"
           required>
    <div ng-messages="loginForm.password.$error">
        <div ng-message="required">
            Please enter a password
        </div>
        <div ng-message="pattern">
            The password must be at least 6 characters long
        </div>
    </div>
</script>

<script type='text/ng-template' id="field_password_repeat">
    <label>Password repeat:</label>
    <input aria-label="password repeat"
           name="password_repeat"
           type="password"
           ng-model="password_repeat"
           ng-equals="user.password"
           required>
    <div ng-messages="registerForm.password_repeat.$error">
        <div ng-message="required">
            Please repeat your password to ensure there weren't typos
        </div>
        <div ng-message="equality">
            Passwords do not match
        </div>
    </div>
</script>
